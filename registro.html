<!DOCTYPE html>
<html lang=es>
<head>

		
	<title>Registro - BeGreen</title>
		
	<!-- View port -->
	<meta name=”viewport” value=”width=device-width, initial-scale=1”>	
		
	<!-- Formato-->
	<meta charset="utf-8">
		
	<!-- Descripción del sitio -->
	<meta name="description" content="Sitio web oficial de BeGreen Colombia">
		
	<!-- Bootstrap -->
	<link href = "css/bootstrap.min.css" rel="stylesheet">
		
	<!--Custom styles-->
	<link href = "css/styles.css" rel="stylesheet">
		
	<!-- Favicon -->
	<link rel="icon" 
	type="image/png" 
	href="images/favicon.png">
			  
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
	<!-- Parse -->
	<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.4.min.js"></script>
		
		
</head>
	
<body onload="javascript:validarVendedor()">
	
	<!-- Navbar  Top-->
	<div class="navbar navbar-default navbar-static-top">
		<div class="container">
			
			<!-- Header -->
			<div class="navbar-header">
				<!-- Brand -->					
				<a class="navbar-brand" href="index.html"> <img class="img-responsive brandPeewah" src="images/brandPeewah.png"></a>
			</div>
			
		</div>
	</div>
		
		
	<h1 class="text-center">Registro de clientes</h1>

	<!-- Formulario de clientes -->
	<form class="form-horizontal col-sm-12" name = "formRegister" action ="javascript:register()" >
		<div class="form-group">
			<label>Cédula</label>
			<input class="form-control required" placeholder="Cédula del cliente" data-placement="top" data-trigger="manual" 
			data-content="Debe contener al menos tres caracteres" type="text" name="cedula">
		</div>
						  
		<div class="form-group">
			<label>Nombre</label>
			<input class="form-control required" placeholder="Nombre del cliente" data-placement="top" 
			data-trigger="manual" data-content="Debe contener al menos tres caracteres" type="text" name="nombre">
		</div>
							  
		<div class="form-group">
			<label>Email</label>
			<input class="form-control email" placeholder="El email del cliente para poder contactarlo" data-placement="top" 
			data-trigger="manual" data-content="Debes poner un email v&aacute;lido para contactarlo (user@gmail.com)" type="text" name="email">
		</div>
		
		<div class="form-group">
			<label>Teléfono</label>
			<input class="form-control" placeholder="El teléfono del cliente para poder contactarlo" data-placement="top" 
			data-trigger="manual" data-content="Debe contener al menos tres caracteres" type="text" name="telefono">
		</div>
		

		<div class="form-group">
			<button type="submit" class="btn btn-success pull-right">Registrar</button> 
			<p class="help-block pull-left text-danger hide" id="form-error">&nbsp; La informaci&oacute;n no es válida. </p>
		</div>
	</form>
	
	
      <div id="userLogged">
      </div>
	  
	  <button class="btn btn-danger" onclick="logout()">Cerrar sesión</button>

		

	<!-- Scripts propios -->
	<script type="text/javascript">
  
  
  	// Registro de clientes
	function register(){
		Parse.initialize("LUSRBvC9SjQBrv2YEPCoCMO3gDbDVzy415qrZumJ", "GQyuwQsf0IBgbeTCzWKDqr5TxOwral7IvdlYbT6J");    
		var Persona = Parse.Object.extend("Persona");
		var persona = new Persona();
		persona.set("cedula", document.formRegister.cedula.value);
		persona.set("nombre", document.formRegister.nombre.value);
		persona.set("email", document.formRegister.email.value);
		persona.set("telefono", document.formRegister.telefono.value);
		
		persona.save(null, {
			success:function(persona){
			    alert('New object created with objectId: ' + persona.cedula);
				
			},
			error:function(persona, error){
				alert('Failed to create new object, with error code: ' + error.message);
			}
		});

	}
	
	//Validar existencia de un vendedor
	function validarVendedor(){
		Parse.initialize("LUSRBvC9SjQBrv2YEPCoCMO3gDbDVzy415qrZumJ", "GQyuwQsf0IBgbeTCzWKDqr5TxOwral7IvdlYbT6J");    
		var currentUser = Parse.User.current();
		if (currentUser) {
			 $(".success").show();
			 document.getElementById("userLogged").innerHTML = 'Sesión iniciada como: ' + currentUser.get('name');
			 
		} 
		else{
			var newUrl = "login.html";
			window.location.replace(newUrl);
			document.location.href = newUrl;
		}
	
	}
	
	//Cerrar sesión
	function logout(){
    	var newUrl = "login.html";
		window.location.replace(newUrl);
		document.location.href = newUrl;
		Parse.User.logOut();
	}
 
	</script>
		

		
	<!-- jQuery -->
	<script src="js/jquery.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.js"></script>
		
		
</body>

</html>